<!doctype html>
<html>
  <head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <!-- TITLE -->
    <title>cordova-geolocation Demo</title>

    <!-- COMPONENT -->
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../cordova-geolocation.html">
    <link rel="import" href="../../google-map/google-map.html">
  </head>
  <body unresolved>
    <style>
      * {
        box-sizing: border-box;
      }

      google-map {
        display: block;
        height: 100%;
        left: 0;
        position: fixed;
        top: 0;
        width: 100%;
      }
    </style>

    <cordova-geolocation
      auto
      high-accuracy
      latitude="{{latitude}}"
      longitude="{{longitude}}"
      loop
    ></cordova-geolocation>

    <google-map
      api-key="AIzaSyA3otwZU-5RioMHy5XbS7NJhDbocVJhtZc"
      disable-default-ui
      disable-map-type-control
      disable-zoom
      styles='[{"featureType":"poi","stylers":[{"visibility":"off"}]},{"featureType":"transit","stylers":[{"visibility":"off"}]}]'>
      <google-map-marker
        title="Me"></google-map-marker>
    </google-map>

    <script>
      const geolocationEl = document.querySelector('cordova-geolocation');
      const mapEl = document.querySelector('google-map');
      const markerEl = document.querySelector('google-map-marker');
      let circle;

      geolocationEl.addEventListener(
        'latitude-changed', function () {
          mapEl.latitude = geolocationEl.latitude;
          markerEl.latitude = geolocationEl.latitude;
        }
      );
      geolocationEl.addEventListener(
        'longitude-changed', function () {
          mapEl.longitude = geolocationEl.longitude;
          markerEl.longitude = geolocationEl.longitude;
        }
      );
    </script>
  </body>
</html>
